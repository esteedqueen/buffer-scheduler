#! /usr/bin/env ruby
puts "Hello!"

require 'rubygems'
require 'bundler/setup'
require 'dotenv'
Dotenv.load

require 'hbs_content'
require 'buffer'

require_relative '../lib/buffer_schedule'

puts HbsContent::VERSION

HbsContent.configure(:contentful,
  access_token: ENV['CONTENTFUL_ACCESS_TOKEN'],
  space: ENV['CONTENTFUL_SPACE_ID']
)

buffer_client = Buffer::Client.new(ENV['BUFFER_ACCESS_TOKEN'])

advertisement = HbsContent::ListOfTweets.advertisement.tweets.map(&:text)
random_content = HbsContent::ListOfTweets.internal_content.tweeets

puts client.profiles[0].id # TODO map some of the profile data to json so the details can be reused
puts client.profiles.count # TODO map some of the profile data to json so the details can be reused

buffer_schedule = BufferSchedule.new(client)
buffer_schedule.update(advertisement, random_content)

